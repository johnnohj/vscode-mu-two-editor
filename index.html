<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colored Blinka Font - Localhost Test</title>
    <style>
        @font-face {
            font-family: 'SimpleBlinka';
            src: url('./FreeMono-Simple-Blinka.ttf') format('truetype');
            font-display: swap;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0 0 10px 0;
            font-size: 2.5em;
        }

        .header p {
            margin: 0;
            opacity: 0.9;
            font-size: 1.1em;
        }

        .content {
            padding: 30px;
        }

        .test-section {
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }

        .test-section h2 {
            margin-top: 0;
            color: #2c3e50;
        }

        .blinka-display {
            font-family: 'ColorBlinka', monospace;
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px dashed #ddd;
        }

        .size-huge { font-size: 120px; }
        .size-large { font-size: 80px; }
        .size-medium { font-size: 48px; }
        .size-small { font-size: 24px; }

        .comparison {
            display: flex;
            align-items: center;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }

        .comparison-item {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .comparison-item h3 {
            margin: 0 0 15px 0;
            color: #2c3e50;
            font-size: 1.1em;
        }

        .original-bmp {
            border: 2px solid #34495e;
            background: black;
            padding: 10px;
            border-radius: 4px;
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }

        .status {
            background: #e8f5e8;
            border: 1px solid #4caf50;
            color: #2e7d32;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .info-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .info-card h3 {
            margin-top: 0;
            color: #2c3e50;
        }

        .color-sample {
            font-family: monospace;
            font-size: 12px;
            background: #f1f3f4;
            padding: 8px;
            border-radius: 4px;
            margin: 5px 0;
        }

        .loading {
            text-align: center;
            padding: 20px;
            font-style: italic;
            color: #666;
        }

        @media (max-width: 768px) {
            .comparison {
                flex-direction: column;
            }

            .size-huge { font-size: 80px; }
            .size-large { font-size: 60px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Colored Blinka Font Test</h1>
            <p>SVG-in-OpenType color preservation from BMP to TTF</p>
        </div>

        <div class="content">
            <div class="status" id="fontStatus">
                <strong>Loading font...</strong> Please wait while the color font loads.
            </div>

            <div class="test-section">
                <h2>üíú Purple Blinka Font (Working Version)</h2>
                <div class="blinka-display size-huge" style="font-family: 'SimpleBlinka', monospace;">&#xE000;</div>
                <p style="text-align: center; margin: 0; color: #666;">
                    Character: U+E000 ‚Ä¢ Size: 120px ‚Ä¢ Purple COLR/CPAL
                </p>
            </div>

            <div class="test-section">
                <h2>üìè Size Variations - Simple Purple (Shape Test)</h2>
                <div class="blinka-display size-large" style="font-family: 'SimpleBlinka', monospace;">&#xE000;</div>
                <div class="blinka-display size-medium" style="font-family: 'SimpleBlinka', monospace;">&#xE000;</div>
                <div class="blinka-display size-small" style="font-family: 'SimpleBlinka', monospace;">&#xE000;</div>
            </div>

            <div class="test-section">
                <h2>üîÑ Original vs Font Comparison</h2>
                <div class="comparison">
                    <div class="comparison-item">
                        <h3>Original BMP (16√ó16)</h3>
                        <img src="assets/blinka.bmp" alt="Original Blinka BMP"
                             class="original-bmp" width="64" height="64">
                        <p style="margin: 10px 0 0 0; font-size: 0.9em; color: #666;">
                            Source bitmap file
                        </p>
                    </div>
                    <div class="comparison-item">
                        <h3>Simple Purple Font (64√ó64)</h3>
                        <div class="blinka-display size-medium" style="margin: 0; font-family: 'SimpleBlinka', monospace;">&#xE000;</div>
                        <p style="margin: 10px 0 0 0; font-size: 0.9em; color: #666;">
                            Simple purple COLR font
                        </p>
                    </div>
                </div>
            </div>

            <div class="test-section">
                <h2>üé® Technical Information</h2>
                <div class="info-grid">
                    <div class="info-card">
                        <h3>Font Details</h3>
                        <p><strong>Working Font:</strong> FreeMono-Simple-Blinka.ttf</p>
                        <p><strong>Technology:</strong> COLR/CPAL (Color layers)</p>
                        <p><strong>Character:</strong> U+E000 (Private Use)</p>
                        <p><strong>Source:</strong> 16√ó16 BMP scaled to 64√ó64</p>
                    </div>
                    <div class="info-card">
                        <h3>Color Preservation</h3>
                        <p><strong>Shape:</strong> 130 pixels preserved from original</p>
                        <p><strong>Color:</strong> Simple purple (RGB 128, 32, 192)</p>
                        <div class="color-sample">Implementation:
‚Ä¢ Black pixels (RGB 0,0,0) = transparent background
‚Ä¢ All other pixels = purple color layer
‚Ä¢ Y-axis corrected for proper orientation
‚Ä¢ 4x scaling for better visibility</div>
                    </div>
                </div>
            </div>

            <div class="test-section">
                <h2>üî§ Text Integration Test</h2>
                <div style="font-family: 'SimpleBlinka', monospace; font-size: 32px; text-align: center;
                           background: white; padding: 20px; border-radius: 8px;">
                    &#xE000; Hello Blinka! &#xE000;
                </div>
                <p style="text-align: center; margin: 10px 0 0 0; color: #666;">
                    Purple font mixed with regular text
                </p>
            </div>

            <div class="test-section">
                <h2>üî§ Small Size Test (12pt/16px) - Purple Version</h2>
                <div style="font-family: 'SimpleBlinka', monospace; font-size: 16px; text-align: center;
                           background: white; padding: 20px; border-radius: 8px;">
                    &#xE000;&#xE000;&#xE000; Small Blinka Icons &#xE000;&#xE000;&#xE000;<br>
                    Use in code: printf("Hello &#xE000; World!");
                </div>
                <p style="text-align: center; margin: 10px 0 0 0; color: #666;">
                    12pt/16px size for code editor use - testing shape accuracy
                </p>
            </div>
        </div>
    </div>

    <script>
        // Font loading detection and status updates
        function updateFontStatus() {
            const statusEl = document.getElementById('fontStatus');

            const simpleLoaded = document.fonts.check('32px SimpleBlinka');

            if (simpleLoaded) {
                let message = '<strong>‚úÖ Font loaded!</strong> Purple Blinka font is ready. The colored Blinka glyph should be visible above.';

                statusEl.innerHTML = message;
                statusEl.style.background = '#e8f5e8';
                statusEl.style.borderColor = '#4caf50';
                statusEl.style.color = '#2e7d32';
            } else {
                statusEl.innerHTML = '<strong>‚è≥ Loading font...</strong> Loading purple Blinka font. If this persists, check browser console.';
                statusEl.style.background = '#fff3cd';
                statusEl.style.borderColor = '#ffc107';
                statusEl.style.color = '#856404';
            }
        }

        // Check font loading status
        document.fonts.ready.then(() => {
            console.log('Document fonts ready');
            updateFontStatus();
        });

        // Also check periodically in case fonts.ready doesn't fire
        setInterval(updateFontStatus, 1000);

        // Initial check
        updateFontStatus();

        // Log font loading attempts
        document.fonts.addEventListener('loadingdone', (event) => {
            console.log('Font loading done:', event);
            updateFontStatus();
        });

        document.fonts.addEventListener('loadingerror', (event) => {
            console.error('Font loading error:', event);
            const statusEl = document.getElementById('fontStatus');
            statusEl.innerHTML = '<strong>‚ùå Font loading failed!</strong> Check that FreeMono-Color-Blinka.ttf is accessible.';
            statusEl.style.background = '#f8d7da';
            statusEl.style.borderColor = '#dc3545';
            statusEl.style.color = '#721c24';
        });
    </script>
</body>
</html>